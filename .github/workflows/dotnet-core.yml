name: .NET Core

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

jobs:
  build:

    runs-on: windows-latest
    env:
      PROJECT_DIRECTORY_PATH: "HelloWorld"
      IIS_SERVER_COMPUTER_NAME: ${{ secrets.IIS_SERVER_COMPUTER_NAME }}
      IIS_WEBSITE_NAME: ${{ secrets.IIS_WEBSITE_NAME }}
      IIS_SERVER_USERNAME: ${{ secrets.IIS_SERVER_USERNAME }}
      IIS_SERVER_PASSWORD: ${{ secrets.IIS_SERVER_PASSWORD }}
      RECYCLE_APP_NAME: ${{ secrets.RECYCLE_APP_NAME }}
      WEBSITE_CONTENT_PATH: ${{ secrets.WEBSITE_CONTENT_PATH }}

    steps:
      - name: Stop Application Pool
        shell: cmd
        run: '"C:/azagent/A1/_work/_tasks/IISWebAppDeploymentOnMachineGroup_1b467810-6725-4b6d-accd-886174c09bba/0.156.10/node_modules/webdeployment-common-v2/MSDeploy3.6/msdeploy.exe" -verb:sync -allowUntrusted -source:recycleApp -dest:recycleApp="Hello-World",recycleMode="StopAppPool",computerName="202.92.6.94:3389/msdeploy.axd?site=Hello-World",username="administrator",password="qwer1234QWER",AuthType="Basic"'
